# 503. 下一个更大元素 II

## 题目

给定一个循环数组（最后一个元素的下一个元素是数组的第一个元素），输出每个元素的下一个更大元素。数字 x 的下一个更大的元素是按数组遍历顺序，这个数字之后的第一个比它更大的数，这意味着你应该循环地搜索它的下一个更大的数。如果不存在，则输出 -1。

**注意:** 输入数组的长度不会超过 10000。

## 示例

**示例 1：**

> 输入: [1,2,1]
> 输出: [2,-1,2]
> 解释: 第一个 1 的下一个更大的数是 2；
> 数字 2 找不到下一个更大的数； 
> 第二个 1 的下一个最大的数需要循环搜索，结果也是 2。

## 解题思路

在496. 下一个更大元素 I 中，我们用单调栈来找下一个更大的元素，本题不同的地方在于，下一个更大的元素可能在数组的前面，那么哪些数字的下一个更大的元素可能在数组的前面呢？仔细想想就会发现，下一个更大的元素可能在数组的后面的元素都会被出栈，所以遍历一遍数组后单调栈内剩下的那些数字，它们的下一个更大的元素可能在数组的前面，或者没有。所以可以再遍历一遍，用比它们更大的元素将它们弹出栈，但是这一遍遍历和上一遍遍历的区别在于，不需要再将遍历的元素入栈，因为仔细想想就知道，它们要么是上一遍遍历已经出栈过的元素，不需要再入栈出栈一次，要么是在一遍遍历结束后栈内的元素，入栈后会与栈内的元素重复，即第二遍遍历不入栈并不会影响算法的正确性。

时间复杂度为O(n)，空间复杂度为O(n)。

## 性能

执行用时：208 ms, 在所有 Python3 提交中击败了97.71%的用户

内存消耗：16.4 MB, 在所有 Python3 提交中击败了31.53%的用户

## 声明

来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/next-greater-element-ii
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。