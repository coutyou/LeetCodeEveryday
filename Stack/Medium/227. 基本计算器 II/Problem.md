# 227. 基本计算器 II

## 题目

实现一个基本的计算器来计算一个简单的字符串表达式的值。

字符串表达式仅包含非负整数，`+`， `-` ，`*`，`/` 四种运算符和空格 ` `。 整数除法仅保留整数部分。

## 示例

**示例 1：**

> 输入: "3+2*2"
> 输出: 7

**示例 2：**

> 输入: " 3/2 "
> 输出: 1

**示例 3：**

> 输入: " 3+5 / 2 "
> 输出: 5

## 提示

* 你可以假设所给定的表达式都是有效的。
* 请不要使用内置的库函数` eval `。

## 解题思路

如果只有加减法，那么很简单，用栈操作就行了，但是本题还有乘除法，其优先级比加减法高。那么可以考虑分为两步进行运算，先进行乘除法，再进行加减法。

为此，用一个栈储存乘除法的结果，最后求和。遍历字符串，并且记录上一个操作符，遇到操作符则意味num的累积结束了，对上一个操作符进行判断，如果是加减，则将num或-num入栈。如果是乘除法，则将栈顶的元素与num进行乘除法运算再入栈。遍历结束后，虽然没有操作符了，但还是要对上一个操作符进行判断。最后进行栈内元素的求和。

时间复杂度为O(n)，空间复杂度为O(n)。

## 性能

执行用时：80 ms, 在所有 Python3 提交中击败了93.20%的用户

内存消耗：16.5 MB, 在所有 Python3 提交中击败了69.09%的用户

## 声明

来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/basic-calculator-ii/
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。