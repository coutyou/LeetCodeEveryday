# 1021. 删除最外层的括号

## 题目

有效括号字符串为空 `("")`、`"(" + A + ")"` 或 `A + B`，其中 `A` 和 `B` 都是有效的括号字符串，`+` 代表字符串的连接。例如，`""`，`"()"`，`"(())()"` 和 `"(()(()))"` 都是有效的括号字符串。

如果有效字符串` S `非空，且不存在将其拆分为` S = A+B `的方法，我们称其为**原语（primitive）**，其中 `A`和 `B`都是非空有效括号字符串。

给出一个非空有效字符串`S`，考虑将其进行原语化分解，使得：`S = P_1 + P_2 + ... + P_k`，其中 `P_i` 是有效括号字符串原语。

对 `S` 进行原语化分解，删除分解中每个原语字符串的最外层括号，返回 `S` 。

## 示例

**示例 1：**

> 输入："(()())(())"
> 输出："()()()"
> 解释：
> 输入字符串为 "(()())(())"，原语化分解得到 "(()())" + "(())"，
> 删除每个部分中的最外层括号后得到 "()()" + "()" = "()()()"。

**示例 2：**

> 输入："(()())(())(()(()))"
> 输出："()()()()(())"
> 解释：
> 输入字符串为 "(()())(())(()(()))"，原语化分解得到 "(()())" + "(())" + "(()(()))"，
> 删除每个部分中的最外层括号后得到 "()()" + "()" + "()(())" = "()()()()(())"。
>

**示例 3：**

> 输入："()()"
> 输出：""
> 解释：
> 输入字符串为 "()()"，原语化分解得到 "()" + "()"，
> 删除每个部分中的最外层括号后得到 "" + "" = ""。
>

## 提示

* `S.length <= 10000`
* `S[i]` 为 `"("` 或 `")"`
* `S` 是一个有效括号字符串

## 解题思路

对于大部分涉及到括号的问题，用栈都能解决。

本题中，很容易发现，只要通过栈来不断进行括号的匹配——左括号入栈，右括号与栈顶的左括号匹配出栈。那么当匹配到第一个左括号时，就得到了一个原语。并重复上述过程直到遍历S中所有字符。

由于最后的结果需要去除最外层的括号，因此在入栈时，需要记录字符的下标。在得到一个原语时，就将最外层的左括号和右括号之间的字符串添加到结果中。

时间复杂度为O(n)，空间复杂度为O(n)。

但其实在本题中栈的作用比较单一，只是用来左右括号的匹配，可以用双指针/单指针来进行空间复杂度的优化。具体可以参考[https://leetcode-cn.com/problems/remove-outermost-parentheses/solution/shuang-zhi-zhen-ji-shu-fa-by-simzhou/](https://leetcode-cn.com/problems/remove-outermost-parentheses/solution/shuang-zhi-zhen-ji-shu-fa-by-simzhou/)。

## 性能

执行用时：40 ms, 在所有 Python3 提交中击败了92.17%的用户

内存消耗：15 MB, 在所有 Python3 提交中击败了12.68%的用户

## 声明

来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/remove-outermost-parentheses
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。